# File: Zprime_Dijets_700_JetMETintegration.cfg
# Author: R. Harris
# Date: 6/9/06
#
# JetMET integration testing file for 700 GeV Z prime decaying to dijets.
# Reconstruction for Jets and MET only.
#

process PROD  = {

   # initialize MessageLogger
   include "FWCore/MessageLogger/data/MessageLogger.cfi"

   service = Timing {}


   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 135799753
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 123456789
      }
   }


   # NOTE : if one wants to run with the SiStripDigitizer,
   #        then mag.field in the OscarProducer should be
   #        turned ON; otherwise it gets (re)created by the
   #        SiStripDigitizer, which seems to corrupt at all
   #        the edm::Event record


   # Step 1 : Event Generation
   source = PythiaSource
   {
      untracked int32 maxEvents = 2
      untracked bool pythiaVerbosity = false

      PSet PythiaParameters =
      {

         # This is a vector of ParameterSet names to be read, in this order
         # The first two are in the include files below
         # The last one are simply my additional parameters
     vstring parameterSets =
     {
        "pythiaDefault",
        "myParameters"
     }

         # Default (mostly empty - to keep PYTHIA default) card file
         # Name of the set is "pythiaDefault"
         include "IOMC/GeneratorInterface/test/pythiaDefault.cfg"


         # User cards - name is "myParameters"
     vstring myParameters =
     {

	    'PMAS(32,1)= 700.            !mass of Zprime',
	    'MSEL=0                      !(D=1) to select between full user control (0, then use MSUB) and some preprogrammed alternative',
	    'MSTP(44) = 3                !only select the Z process',
   	    'MSUB(141) = 1               !ff  gamma z0 Z0',

            'MSTJ(11)=3                 ! Choice of the fragmentation function',
            'MSTJ(22)=2                 !Decay those unstable particles',
            'MSTP(2)=1                  !which order running alphaS',
            'MSTP(33)=0                 !(D=0) inclusion of K factors in (=0: none, i.e. K=1)',
            'MSTP(51)=7                 !structure function chosen',
            'MSTP(81)=1                 !multiple parton interactions 1 is Pythia default',
            'MSTP(82)=4                 !Defines the multi-parton model',
            'MSTU(21)=1                 !Check on possible errors during program execution',
            'PARJ(71)=10.               !for which ctau  10 mm',
            'PARP(82)=1.9               !pt cutoff for multiparton interactions',
            'PARP(89)=1000.             !sqrts for which PARP82 is set',
            'PARP(84)=0.4               !Multiple interactions: matter distribution Registered by Chris.Seez@cern.ch',
            'PARP(90)=0.16              !Multiple interactions: rescaling power Registered by Chris.Seez@cern.ch',
            'PMAS(5,1)=4.2              !mass of b quark',
            'PMAS(6,1)=175.             !mass of top quark',
            'PMAS(23,1)=91.187          !mass of Z',
            'PMAS(24,1)=80.22           !mass of W',

   	    'MDME(289,1)= 1            !d dbar',
   	    'MDME(290,1)= 1            !u ubar',
   	    'MDME(291,1)= 1            !s sbar',
   	    'MDME(292,1)= 1            !c cbar',
   	    'MDME(293,1)= 0            !b bar',
   	    'MDME(294,1)= 0            !t tbar',
   	    'MDME(295,1)= 0            !4th gen Q Qbar',
   	    'MDME(296,1)= 0            !4th gen Q Qbar',
   	    'MDME(297,1)= 0            !e e',
   	    'MDME(298,1)= 0            !neutrino e e',
   	    'MDME(299,1)= 0            ! mu mu',
   	    'MDME(300,1)= 0            !neutrino mu mu',
   	    'MDME(301,1)= 0            !tau tau',
   	    'MDME(302,1)= 0            !neutrino tau tau',
   	    'MDME(303,1)= 0            !4th generation lepton',
   	    'MDME(304,1)= 0            !4th generation neutrino',
   	    'MDME(305,1)= 0            !W W',
   	    'MDME(306,1)= 0            !H  charged higgs',
   	    'MDME(307,1)= 0            !Z',
   	    'MDME(308,1)= 0            !Z',
   	    'MDME(309,1)= 0            !sm higgs',
   	    'MDME(310,1)= 0            !weird neutral higgs HA'
         }

      }
   }

   # event vertex smearing - applies only once (internal check)
   # Note : all internal generatoes will always do (0,0,0) vertex
   #
   module VtxSmeared = VertexGenerator
   {
      string type = "IOMC/EventVertexGenerators/GaussianEventVertexGenerator"
      double MeanX = 0.
      double MeanY = 0.
      double MeanZ = 0.
      double SigmaX = 0.015
      double SigmaY = 0.015
      double SigmaZ = 53.0  // in mm (as in COBRA/OSCAR)
   }


  include "Configuration/Applications/data/reco-application-calorimetry-simulation.cff"
  include "Configuration/Applications/data/reco-application-calorimetry-digitization.cff"
  include "Configuration/Applications/data/reco-application-calorimetry-reconstruction.cff"
  include "Configuration/Applications/data/reco-application-calorimetry-caltowers.cff"
  include "Configuration/Applications/data/reco-application-calorimetry-jetmet.cff"
  include "Configuration/Applications/data/reco-application-calorimetry-jetmet-gen.cff"
  include "JetMETCorrections/MCJet/data/JetCorrections.cff"

   module GEN-SIM-DIGI = PoolOutputModule
   {
      untracked string fileName = "evtgen_detsim_digi.root"
   }

   module CAL-JETS = PoolOutputModule {
   untracked string fileName = 'evtgen_jets.root'
   untracked vstring outputCommands = 
     {
      "keep *",
      "drop *_muoncscdigi_*_*",
      "drop *_muondtdigi_*_*",
      "drop *_stripdigi_*_*",
      "drop *_pixdigi_*_*",
      "drop *_hcaldigi_*_*",
      "drop *_ecaldigi_*_*",
      "drop *_SimG4Object_*_*"
      }
   } 


  path p1 = {VtxSmeared, simulation, caloDigi, caloReco, caloTowersRec, caloJetMet, caloJetMetGen, JetCorrections}
  endpath outpath = { GEN-SIM-DIGI, CAL-JETS }
}
